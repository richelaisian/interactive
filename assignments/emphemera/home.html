<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,700" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../css/ephemera.css">
  </head>
  <body>
    <header>
        <a href="#" id="about">?</a>
        <div id="tag-container">
          <div class="tag-type">
            <h2>material</h2>
            <button>metal</button>
            <button>plastic</button>
            <button>wood</button>
            <button>glass</button>
            <button>fabric</button>
            <button>paper</button>
          </div>
          <div class="tag-type">
            <h2>color</h2>
            <button>black</button>
            <button>white</button>
            <button>blue</button>
            <button>red</button>
            <button>brown</button>
            <button>orange</button>
            <button>pink</button>
            <button>green</button>
            <button>yellow</button>
          </div>
          <div class="tag-type">
            <h2>room</h2>
            <button>living room</button>
            <button>dining room</button>
            <button>pink bathroom</button>
            <button>ikea bathroom</button>
            <button>back room</button>
            <button>backyard</button>
          </div>
          <div class="tag-type">
            <h2>floor</h2>
            <button>ground floor</button>
            <button>second floor</button>
            <button>basement floor</button>
          </div>
        </div>
    </header>
    <div id="big-wrap">
      <div id="item-container">
        <div class="item" rel="orange living-room ground-floor">
            <span>Orange Bic Lighter</span>
        </div>
        <div class="item" rel="blue living-room ground-floor">
            <span>Weird Dice</span>
        </div>
        <div class="item" rel="brown living-room ground-floor">
            <span>Coffee Table</span>
        </div>
        <div class="item" rel="living-room fabric black ground-floor">
            <span>Black Velvet Jesus</span>
        </div>
        <div class="item" rel="blue plastic living-room ground-floor">
            <span>Mice Cube</span>
        </div>
        <div class="item" rel="white backyard plastic ground-floor">
            <span>Mannequin</span>
        </div>
        <div class="item" rel="brown basement-floor wood metal">
            <span>Table Saw</span>
        </div>
        <div class="item" rel="second-floor brown plastic">
            <span>Madona Light Switch</span>
        </div>
        <div class="item" rel="second-floor brown white glass wood paper">
            <span>Manga Cutup</span>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      $( ".tag-type button" ).on('click', function() {

        //get text from button
        var buttonText = $(this).text();

        //replace spaces with dashes
        var buttonTag = buttonText.replace(/ /g, "-");

        //add highlight class to all items with the relevant tag
        //(now properly formated) or remove it if it has been unselected
        if ($(this).hasClass('selected-tag')) {
          $('div[rel~="'+buttonTag+'"]').removeClass('highlight');
        } else {
          $('div[rel~="'+buttonTag+'"]').addClass('highlight');
        }

        //toggles class on the button to show if it is selected
        $(this).toggleClass('selected-tag');

        //check all buttons to check if a item is in another set. if it is, readd heightlight
        $('.tag-type button').each(function() {
          if ($(this).hasClass('selected-tag')) {
            //get text from button
            var buttonText2 = $(this).text();
            console.log(buttonText2);

            //replace spaces with dashes
            var buttonTag2 = buttonText2.replace(/ /g, "-");
            console.log(buttonTag2);

            $('div[rel~="'+buttonTag2+'"]').addClass('highlight');
          }
        });
      });
    </script>
  </body>
</html>
